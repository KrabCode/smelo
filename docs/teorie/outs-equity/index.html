<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Outs &amp; Equity – SMELO.CZ</title>
    <link rel="icon" type="image/x-icon" href="../../favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Staatliches&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../base.css">
    <style>
        .example { font-family: monospace; }
        .outs-table { width: 100%; border-collapse: collapse; margin: 16px 0; }
        .outs-table th { text-align: left; color: #888; font-weight: normal; font-size: 0.85em; padding: 6px 10px; border-bottom: 1px solid #333; }
        .outs-table td { padding: 6px 10px; border-bottom: 1px solid #222; color: #ccc; font-size: 0.9em; }
        .outs-table td:first-child { font-family: monospace; color: #ffb300; font-weight: bold; }
        .outs-table tr[data-outs] { cursor: pointer; transition: background 0.15s; }
        .outs-table tr[data-outs]:hover { background: #2a2a2a; }
        .outs-table tr[data-outs].selected { background: #332b00; }
        .tip { background: #1a1a2e; border: 1px solid #2a2a4e; border-radius: 8px; padding: 14px; margin: 12px 0; color: #aab; font-size: 0.9em; }
        .street-toggle { display: flex; gap: 0; }
        .street-toggle input { display: none; }
        .street-toggle label {
            flex: 1;
            text-align: center;
            padding: 10px 0;
            background: var(--bg-input, #1a1a1a);
            border: 1px solid #333;
            color: #888;
            font-size: 0.9em;
            cursor: pointer;
            transition: background 0.2s, color 0.2s, border-color 0.2s;
        }
        .street-toggle label:first-of-type { border-radius: 8px 0 0 8px; }
        .street-toggle label:last-of-type { border-radius: 0 8px 8px 0; border-left: none; }
        .street-toggle input:checked + label {
            background: #ffb300;
            color: #000;
            border-color: #ffb300;
            font-weight: 700;
        }
        .street-toggle label:hover { background: #2a2a2a; }
        .street-toggle input:checked + label:hover { background: #ffc033; }
        .street-sub { display: block; font-size: 0.75em; font-weight: 400; opacity: 0.7; margin-top: 2px; }
    </style>
</head>
<body>
    <div class="header">
        <h1><a href="../../">ŠMELO.CZ</a> <span style="color:#555;">/</span> <a href="../">TEORIE</a> <span style="color:#555;">/</span> <span style="color:#ffb300;">OUTS &amp; EQUITY</span></h1>
        <hr>
    </div>

    <div class="container">
        <h2>Outs &amp; Equity</h2>
        <p>
            Out je karta, která vylepší tvou ruku na pravděpodobně nejlepší.
            Equity je tvá šance na výhru vyjádřená v procentech.
            Obě věci potřebuješ, abys mohl porovnat se svými <a href="../pot-odds/">pot odds</a>.
        </p>

        <h2>Počítání outů</h2>
        <p>V balíčku je 52 karet. Vidíš své 2 + karty na boardu. Zbytek je neznámý.</p>

        <h2>Pravidlo 2 a 4</h2>
        <p>Rychlý způsob, jak převést outy na equity:</p>

        <div class="formula">
            Flop (2 karty přijdou): outy &times; 4 &asymp; equity %<br>
            Turn (1 karta přijde): outy &times; 2 &asymp; equity %
        </div>

        <div class="tip">
            Pravidlo je přesné do ~12 outů. S víc outy mírně nadhodnocuje.
            Pro 15 outů je přesná equity ~54%, ne 60%.
        </div>

        <h2>Příklad</h2>
        <div class="example">
            <span class="label">Ruka:</span> <span class="val">J&#9829; T&#9829;</span><br>
            <span class="label">Flop:</span> <span class="val">Q&#9829; 8&#9829; 3&#9824;</span><br><br>
            <span class="label">Flush draw:</span> 9 outů (zbylé hearty)<br>
            <span class="label">+ gutshot na straight:</span> 3 outy (tři 9, bez 9&#9829; co už je v flush outech)<br>
            <span class="label">Celkem:</span> <span class="val">12 outů</span><br><br>
            <span class="label">Equity (flop):</span> 12 &times; 4 = <span class="val">~48%</span><br>
            <span class="label">Equity (turn):</span> 12 &times; 2 = <span class="val">~24%</span>
        </div>

        <div class="tip">
            Pozor na double counting. Pokud 9&#9829; už počítáš jako flush out, nepočítej ho znovu jako straight out.
        </div>

        <h2>Kalkulačka outů</h2>
        <p>Klikni na řádek nebo zadej outy ručně:</p>

        <table class="outs-table" id="outsTable">
            <tr><th>Outy</th><th>Draw</th><th>Příklad</th></tr>
            <tr data-outs="2"><td>2</td><td>Pocket pair → set</td><td>Máš 77, flop K92</td></tr>
            <tr data-outs="4"><td>4</td><td>Gutshot (inside straight draw)</td><td>Máš 89, flop 67K</td></tr>
            <tr data-outs="6"><td>6</td><td>Dva overcards</td><td>Máš AK, flop 952</td></tr>
            <tr data-outs="8"><td>8</td><td>OESD (open-ended straight draw)</td><td>Máš 89, flop 67K</td></tr>
            <tr data-outs="9"><td>9</td><td>Flush draw</td><td>Máš A&#9829;5&#9829;, flop K&#9829;8&#9829;2&#9827;</td></tr>
            <tr data-outs="12"><td>12</td><td>Flush draw + gutshot</td><td>Máš A&#9829;T&#9829;, flop K&#9829;Q&#9827;3&#9829;</td></tr>
            <tr data-outs="15"><td>15</td><td>Flush draw + OESD</td><td>Máš 7&#9829;8&#9829;, flop 6&#9829;9&#9827;2&#9829;</td></tr>
        </table>

        <div class="calc">
            <div class="calc-row">
                <div class="calc-field">
                    <label>Počet outů</label>
                    <input type="number" id="outs" placeholder="9" value="9" min="1" max="20" step="1">
                </div>
                <div class="calc-field">
                    <label>Street</label>
                    <div class="street-toggle">
                        <input type="radio" name="street" id="streetFlop" value="flop" checked>
                        <label for="streetFlop">Flop <span class="street-sub">2 karty</span></label>
                        <input type="radio" name="street" id="streetTurn" value="turn">
                        <label for="streetTurn">Turn <span class="street-sub">1 karta</span></label>
                    </div>
                </div>
            </div>

            <div class="result" id="result">
                <div class="result-row">
                    <span class="result-label">Equity (pravidlo 2&amp;4)</span>
                    <span class="result-value" id="rQuick">&ndash;</span>
                </div>
                <div class="result-row">
                    <span class="result-label">Equity (přesná)</span>
                    <span class="result-value" id="rExact">&ndash;</span>
                </div>
                <div class="result-row">
                    <span class="result-label">Min. pot odds pro call</span>
                    <span class="result-value" id="rPotOdds">&ndash;</span>
                </div>
            </div>
        </div>

        <h2>Equity vs. pot odds</h2>
        <p>Zadej pot a bet soupeře &mdash; kalkulačka porovná pot odds s tvou equity z outů výše.</p>

        <div class="calc">
            <div class="calc-row">
                <div class="calc-field">
                    <label>Pot (před betem)</label>
                    <input type="number" id="pot" placeholder="100" value="100" min="0" step="any">
                </div>
                <div class="calc-field">
                    <label>Bet soupeře</label>
                    <input type="number" id="bet" placeholder="50" value="50" min="0" step="any">
                </div>
            </div>

            <div class="result" id="resultPO">
                <div class="result-row">
                    <span class="result-label">Pot odds</span>
                    <span class="result-value" id="rPO">&ndash;</span>
                </div>
                <div class="result-row">
                    <span class="result-label">Equity</span>
                    <span class="result-value" id="rMyEq">&ndash;</span>
                </div>
                <div class="result-row">
                    <span class="result-label">Hraniční bet</span>
                    <span class="result-value" id="rBreakBet">&ndash;</span>
                </div>
            </div>

            <div class="note" id="notePO"></div>
        </div>

        <p>
            Pokud pot odds nestačí, podívej se na <a href="../implied-odds/">implied odds</a> &mdash; kolik můžeš vyhrát na dalších streetech.
        </p>
    </div>

    <script>
        !function(){var w=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT),n=[];while(w.nextNode())n.push(w.currentNode);n.forEach(function(t){if(/[\u2660\u2665\u2663\u2666]/.test(t.textContent)){var s=document.createElement('span');s.innerHTML=t.textContent.replace(/\u2660/g,'<span style="color:#60a5fa">\u2660</span>').replace(/\u2665/g,'<span style="color:#f87171">\u2665</span>').replace(/\u2663/g,'<span style="color:#4ade80">\u2663</span>').replace(/\u2666/g,'<span style="color:#ffb300">\u2666</span>');t.parentNode.replaceChild(s,t)}})}();
    </script>
    <script>
        var outsEl = document.getElementById('outs');
        var streetRadios = document.querySelectorAll('input[name="street"]');
        var resultEl = document.getElementById('result');
        var potEl = document.getElementById('pot');
        var betEl = document.getElementById('bet');
        var resultPOEl = document.getElementById('resultPO');
        var notePOEl = document.getElementById('notePO');

        var currentExact = null;

        function calcOuts() {
            var outs = parseInt(outsEl.value);
            if (isNaN(outs) || outs < 1 || outs > 20) {
                resultEl.classList.remove('visible');
                currentExact = null;
                calcPO();
                if (typeof syncSelected === 'function') syncSelected();
                return;
            }

            var isFlop = document.querySelector('input[name="street"]:checked').value === 'flop';
            var quick = outs * (isFlop ? 4 : 2);
            if (quick > 100) quick = 100;

            var unknown = isFlop ? 47 : 46;
            if (isFlop) {
                var missOne = (unknown - outs) / unknown;
                var missTwo = (unknown - 1 - outs) / (unknown - 1);
                currentExact = (1 - missOne * missTwo) * 100;
            } else {
                currentExact = (outs / unknown) * 100;
            }

            document.getElementById('rQuick').textContent = quick.toFixed(0) + '%';
            document.getElementById('rExact').textContent = currentExact.toFixed(1) + '%';
            document.getElementById('rPotOdds').textContent = currentExact.toFixed(1) + '%';
            resultEl.classList.add('visible');
            calcPO();
            if (typeof syncSelected === 'function') syncSelected();
        }

        function calcPO() {
            var pot = parseFloat(potEl.value);
            var bet = parseFloat(betEl.value);

            if (isNaN(pot) || isNaN(bet) || pot < 0 || bet <= 0) {
                resultPOEl.classList.remove('visible');
                notePOEl.classList.remove('visible');
                return;
            }

            var totalPot = pot + bet + bet;
            var odds = (bet / totalPot) * 100;

            document.getElementById('rPO').textContent = odds.toFixed(1) + '%';

            if (currentExact !== null) {
                document.getElementById('rMyEq').textContent = currentExact.toFixed(1) + '%';
                var eq = currentExact / 100;
                if (eq >= 0.5) {
                    document.getElementById('rBreakBet').textContent = 'libovolný';
                } else {
                    var breakBet = eq * pot / (1 - 2 * eq);
                    document.getElementById('rBreakBet').textContent = Math.floor(breakBet).toLocaleString('cs');
                }
                resultPOEl.classList.add('visible');

                if (currentExact >= odds) {
                    notePOEl.textContent = 'Call je +EV. Equity (' + currentExact.toFixed(1) + '%) > pot odds (' + odds.toFixed(1) + '%).';
                    notePOEl.style.background = '#1a2e1a';
                    notePOEl.style.borderColor = '#2a4a2a';
                    notePOEl.style.color = '#8fbc8f';
                } else {
                    notePOEl.textContent = 'Call je -EV. Equity (' + currentExact.toFixed(1) + '%) < pot odds (' + odds.toFixed(1) + '%). Folduj (nebo implied odds).';
                    notePOEl.style.background = '#2e1a1a';
                    notePOEl.style.borderColor = '#4a2a2a';
                    notePOEl.style.color = '#bc8f8f';
                }
                notePOEl.classList.add('visible');
            } else {
                document.getElementById('rMyEq').textContent = '–';
                document.getElementById('rBreakBet').textContent = '–';
                resultPOEl.classList.add('visible');
                notePOEl.classList.remove('visible');
            }
        }

        var outsRows = document.querySelectorAll('#outsTable tr[data-outs]');

        function syncSelected() {
            var v = parseInt(outsEl.value);
            outsRows.forEach(function(r) {
                r.classList.toggle('selected', parseInt(r.getAttribute('data-outs')) === v);
            });
        }

        outsRows.forEach(function(row) {
            row.addEventListener('click', function() {
                outsEl.value = row.getAttribute('data-outs');
                calcOuts();
            });
        });

        outsEl.addEventListener('input', function() { calcOuts(); });
        streetRadios.forEach(function(r) { r.addEventListener('change', calcOuts); });
        potEl.addEventListener('input', calcPO);
        betEl.addEventListener('input', calcPO);
        calcOuts();
    </script>
<script src="../../reveal.js"></script>
</body>
</html>
