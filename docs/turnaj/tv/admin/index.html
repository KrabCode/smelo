<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Admin – Turnaj SMELO.CZ</title>
    <link rel="icon" type="image/x-icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../base.css">
    <link rel="stylesheet" href="style.css">

    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>
</head>
<body>
    <div class="admin-wrap">

        <!-- Timer controls -->
        <div class="section" id="section-timer">
            <h2><button type="button" class="guard-toggle" data-target="section-timer">&#x1F512;</button> Timer</h2>
            <div class="timer-display" id="timer-display">00:00</div>
            <div class="timer-level" id="timer-level"></div>
            <div class="section-body">
            <div class="btn-row">
                <button class="btn accent big" id="btn-start">Start</button>
                <button class="btn danger big" id="btn-reset">Reset</button>
            </div>
            <div id="start-time-row" style="display:none">
                <label>Posun timeru</label>
                <div class="inline-row">
                    <input type="time" id="cfg-start-time" step="60">
                    <button class="btn" id="btn-set-start-time">Nastavit</button>
                </div>
                <div class="inline-row" style="margin-top:8px">
                    <button class="btn big" id="btn-level-back" style="flex:1">&#9664; Level zpět</button>
                    <button class="btn big" id="btn-level-fwd" style="flex:1">Level vpřed &#9654;</button>
                </div>
            </div>
            </div>
        </div>

        <!-- Players -->
        <div class="section" id="section-players">
            <h2><button type="button" class="guard-toggle" data-target="section-players">&#x1F512;</button> Hráči <span class="badge" id="player-count">0</span></h2>
            <div class="section-body">
            <div class="inline-row">
                <input type="text" id="new-player-name" placeholder="Jméno hráče..." enterkeyhint="done">
                <button class="btn accent" id="btn-add-player">+ Hráč</button>
            </div>
            <div id="players-list"></div>
            <div class="player-summary" id="player-summary"></div>
            <div class="btn-row" style="margin-top:12px">
                <button class="btn" id="btn-add-test-players">+ Test (8)</button>
                <button class="btn danger" id="btn-remove-all-players">Smazat vše</button>
            </div>
            </div>
        </div>

        <!-- Winners -->
        <div class="section" id="section-winners">
            <h2><button type="button" class="guard-toggle" data-target="section-winners">&#x1F512;</button> Výsledky</h2>
            <div class="section-body">
                <div id="winners-fields"></div>
                <div class="btn-row" style="margin-top:8px">
                    <button class="btn accent big" id="btn-save-winners">Vyhlásit vítěze</button>
                    <button class="btn danger" id="btn-clear-winners">Smazat výsledky</button>
                </div>
            </div>
        </div>

        <!-- Payouts -->
        <div class="section" id="section-payout">
            <h2><button type="button" class="guard-toggle" data-target="section-payout">&#x1F512;</button> Výplaty</h2>
            <div class="section-body">
                <div class="pool-display" id="pool-display"></div>
                <div id="payout-config-rows"></div>
                <div class="btn-row" style="margin-top:8px">
                    <button class="btn" id="btn-payout-add">+ Místo</button>
                    <button class="btn" id="btn-payout-remove">− Místo</button>
                    <button class="btn" id="btn-payout-auto">Auto</button>
                </div>
                <div class="payout-config-total" id="payout-config-total"></div>
            </div>
        </div>

        <!-- Seating -->
        <div class="section" id="section-seating">
            <h2><button type="button" class="guard-toggle" data-target="section-seating">&#x1F512;</button> Zasedací pořádek</h2>
            <div id="seating-status"></div>
            <div class="section-body">
                <div id="table-locks-ui"></div>
                <div class="btn-row" style="margin-top:12px">
                    <button class="btn big" id="btn-reshuffle-seats">Přepočítat místa</button>
                </div>
            </div>
        </div>

        <!-- Notes -->
        <div class="section" id="section-notes">
            <h2><button type="button" class="guard-toggle" data-target="section-notes">&#x1F512;</button> Poznámky (ticker)</h2>
            <div class="section-body">
                <div id="notes-list"></div>
                <div class="btn-row" style="margin-top:8px">
                    <button class="btn" id="btn-add-note">+ Poznámka</button>
                    <span class="save-status" id="notes-save-status"></span>
                </div>
                <div style="margin-top:12px">
                    <label for="cfg-ticker-speed" style="font-size:0.85em;color:var(--text-secondary)">Rychlost tickeru: <span id="ticker-speed-label">40s</span></label>
                    <input type="range" id="cfg-ticker-speed" min="10" max="120" step="5" value="40" style="width:100%">
                </div>
                <div id="break-messages-section" style="margin-top:16px;border-top:1px solid rgba(255,255,255,0.08);padding-top:16px">
                    <label style="margin-bottom:4px;display:block">Texty při přestávkách</label>
                    <small class="hint" style="display:block;margin-bottom:8px">První řádek se zobrazí větším písmem</small>
                    <div id="break-messages-list"></div>
                    <span class="save-status" id="break-save-status"></span>
                </div>
            </div>
        </div>

        <!-- Rules -->
        <div class="section" id="section-rules">
            <h2><button type="button" class="guard-toggle" data-target="section-rules">&#x1F512;</button> Pravidla (TV)</h2>
            <div class="section-body">
                <div id="rules-sections-list"></div>
                <span class="save-status" id="rules-save-status"></span>
            </div>
        </div>

        <!-- Blind structure preview -->
        <div class="section" id="section-blinds">
            <h2><button type="button" class="guard-toggle" data-target="section-blinds">&#x1F512;</button> Struktura blindů</h2>
            <div class="section-body">
            <table class="structure-table">
                <thead>
                    <tr><th>#</th><th>Čas</th><th>SB</th><th>BB</th><th id="th-ante" style="display:none">Ante</th></tr>
                </thead>
                <tbody id="structure-body"></tbody>
            </table>
            </div>
        </div>

        <!-- Config -->
        <div class="section" id="section-config">
            <h2><button type="button" class="guard-toggle" data-target="section-config">&#x1F512;</button> Nastavení turnaje</h2>
            <div class="section-body">
                <div class="config-grid">
                    <div class="config-sub">Struktura</div>
                    <div class="config-field">
                        <label for="cfg-level-dur">Délka levelu (min)</label>
                        <input type="number" id="cfg-level-dur" value="20" inputmode="numeric">
                    </div>
                    <div class="config-field">
                        <label for="cfg-max-levels">Max levelů</label>
                        <input type="number" id="cfg-max-levels" value="12" min="2" inputmode="numeric">
                    </div>
                    <div class="config-field">
                        <label for="cfg-ante-mult">Ante (× BB)</label>
                        <input type="number" id="cfg-ante-mult" value="0" min="0" max="10" step="0.5" inputmode="decimal">
                    </div>
                    <div class="config-field">
                        <label for="cfg-start-time-est">Orientační začátek</label>
                        <input type="time" id="cfg-start-time-est" value="19:00" step="60">
                    </div>
                    <div class="config-sub">Přestávka</div>
                    <div class="config-field">
                        <label for="cfg-break-dur">Délka přestávky (min)</label>
                        <input type="number" id="cfg-break-dur" value="30" min="1" inputmode="numeric">
                    </div>
                    <div class="config-field">
                        <label for="cfg-levels-per-break">Přestávka každých N levelů</label>
                        <input type="number" id="cfg-levels-per-break" value="0" min="0" inputmode="numeric">
                    </div>
                    <div class="config-field">
                        <label for="cfg-max-breaks">Max počet přestávek</label>
                        <input type="number" id="cfg-max-breaks" value="0" min="0" inputmode="numeric">
                        <small class="hint">0 = bez limitu</small>
                    </div>

                    <div class="config-sub">Žetony</div>
                    <div class="config-field">
                        <label for="cfg-buyin-amount">Buy-in (Kč)</label>
                        <input type="number" id="cfg-buyin-amount" value="400" inputmode="numeric">
                    </div>
                    <div class="config-field">
                        <label for="cfg-stack">Žetonů za buy-in</label>
                        <input type="number" id="cfg-stack" value="5000" inputmode="numeric">
                    </div>
                    <div class="config-field"></div>
                    <div class="config-field">
                        <label for="cfg-bonus">Bonus žetony za včasný příchod</label>
                        <input type="number" id="cfg-bonus" value="5000" inputmode="numeric">
                    </div>

                    <div class="config-sub">Add-on</div>
                    <div class="config-field">
                        <label for="cfg-addon-amount">Add-on cena (Kč)</label>
                        <input type="number" id="cfg-addon-amount" value="0" min="0" inputmode="numeric">
                    </div>
                    <div class="config-field">
                        <label for="cfg-addon-chips">Add-on žetony</label>
                        <input type="number" id="cfg-addon-chips" value="0" min="0" inputmode="numeric">
                    </div>

                </div>
                <div class="save-status" id="config-save-status"></div>
            </div>
        </div>

        <!-- Sounds -->
        <div class="section" id="section-sounds">
            <h2><button type="button" class="guard-toggle" data-target="section-sounds">&#x1F512;</button> Zvuky</h2>
            <div class="section-body">
                <div class="sound-list">
                    <div class="sound-item">
                        <label for="cfg-level-sound">Změna levelu</label>
                        <div class="inline-row" style="margin-bottom:0">
                            <select id="cfg-level-sound" class="player-seat-select" style="flex:1;font-size:1.1em;padding:12px">
                                <option value="">— žádný —</option>
                                <option value="castleportcullis.wav">castleportcullis.wav</option>
                                <option value="holy!.wav">holy!.wav</option>
                                <option value="superholy.wav">superholy.wav</option>
                                <option value="unholy!.wav">unholy!.wav</option>
                                <option value="whistle.wav">whistle.wav</option>
                            </select>
                            <button class="btn" id="btn-test-sound" type="button">Test</button>
                        </div>
                    </div>
                    <div class="sound-item">
                        <label for="cfg-buy-sound">Buy-in / re-buy</label>
                        <div class="inline-row" style="margin-bottom:0">
                            <select id="cfg-buy-sound" class="player-seat-select" style="flex:1;font-size:1.1em;padding:12px">
                                <option value="">— žádný —</option>
                                <option value="random">náhodný</option>
                                <option value="coins falling 1.wav">coins falling 1.wav</option>
                                <option value="coins falling 2.wav">coins falling 2.wav</option>
                                <option value="key pickup guantlet 4.wav">key pickup guantlet 4.wav</option>
                            </select>
                            <button class="btn" id="btn-test-buy-sound" type="button">Test</button>
                        </div>
                    </div>
                    <div class="sound-item">
                        <label for="cfg-knockout-sound">Vyřazení (prohra)</label>
                        <div class="inline-row" style="margin-bottom:0">
                            <select id="cfg-knockout-sound" class="player-seat-select" style="flex:1;font-size:1.1em;padding:12px">
                                <option value="">— žádný —</option>
                                <option value="random">náhodný</option>
                                <option value="key pickup guantlet 4.wav">key pickup guantlet 4.wav</option>
                                <option value="power up1.wav">power up1.wav</option>
                                <option value="thumbs down.wav">thumbs down.wav</option>
                                <option value="thumbs up.wav">thumbs up.wav</option>
                                <option value="unholy!.wav">unholy!.wav</option>
                            </select>
                            <button class="btn" id="btn-test-knockout-sound" type="button">Test</button>
                        </div>
                    </div>
                    <div class="sound-item">
                        <label for="cfg-knockout-win-sound">Vyřazení (výhra)</label>
                        <div class="inline-row" style="margin-bottom:0">
                            <select id="cfg-knockout-win-sound" class="player-seat-select" style="flex:1;font-size:1.1em;padding:12px">
                                <option value="">— žádný —</option>
                                <option value="random">náhodný</option>
                                <option value="key pickup guantlet 4.wav">key pickup guantlet 4.wav</option>
                                <option value="power up1.wav">power up1.wav</option>
                                <option value="thumbs down.wav">thumbs down.wav</option>
                                <option value="thumbs up.wav">thumbs up.wav</option>
                                <option value="unholy!.wav">unholy!.wav</option>
                            </select>
                            <button class="btn" id="btn-test-knockout-win-sound" type="button">Test</button>
                        </div>
                    </div>
                    <div class="sound-item">
                        <label for="cfg-end-sound">Konec turnaje</label>
                        <div class="inline-row" style="margin-bottom:0">
                            <select id="cfg-end-sound" class="player-seat-select" style="flex:1;font-size:1.1em;padding:12px">
                                <option value="">— žádný —</option>
                                <option value="random">náhodný</option>
                                <option value="castleportcullis.wav">castleportcullis.wav</option>
                                <option value="choir.wav">choir.wav</option>
                                <option value="coins falling 1.wav">coins falling 1.wav</option>
                                <option value="coins falling 2.wav">coins falling 2.wav</option>
                                <option value="unholy!.wav">unholy!.wav</option>
                            </select>
                            <button class="btn" id="btn-test-end-sound" type="button">Test</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Event Log -->
        <div class="section" id="section-event-log">
            <h2><button type="button" class="guard-toggle" data-target="section-event-log">&#x1F512;</button> Průběh</h2>
            <div class="section-body">
                <div id="event-log-list"></div>
                <div class="btn-row" style="margin-top:8px">
                    <button class="btn danger" id="btn-clear-event-log">Smazat log</button>
                </div>
            </div>
        </div>

    </div><!-- .admin-wrap -->

    <script type="module" src="app.js"></script>
</body>
</html>
