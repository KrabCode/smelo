<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Admin – Turnaj SMELO.CZ</title>
    <link rel="icon" type="image/x-icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../base.css">
    <link rel="stylesheet" href="style.css">

    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>
</head>
<body>
    <!-- Password gate -->
    <div id="password-gate" class="password-gate">
        <div class="password-box">
            <h2>Admin přístup</h2>
            <input type="password" id="gate-password" placeholder="Heslo..." enterkeyhint="go" autocomplete="off">
            <button class="btn accent big" id="btn-gate-submit">Vstoupit</button>
            <div class="gate-error" id="gate-error"></div>
        </div>
    </div>

    <!-- Status bar -->
    <div class="status-bar" id="status-bar">
        <span class="status-dot" id="status-dot"></span>
        <span id="status-text">Spojuji...</span>
        <span class="status-right">
            <span id="status-players"></span>
            <span id="status-timer"></span>
        </span>
    </div>

    <div class="admin-wrap">

        <!-- Timer controls -->
        <div class="section" id="section-timer">
            <h2><button type="button" class="guard-toggle" data-target="section-timer">&#x1F512;</button> Timer</h2>
            <div class="timer-display" id="timer-display">00:00</div>
            <div class="timer-level" id="timer-level"></div>
            <div class="section-body">
            <div class="btn-row">
                <button class="btn accent big" id="btn-start">Start</button>
                <button class="btn danger big" id="btn-reset">Reset</button>
            </div>
            <div id="start-time-row" style="display:none">
                <label>Posun timeru</label>
                <div class="inline-row">
                    <input type="time" id="cfg-start-time" step="60">
                    <button class="btn" id="btn-set-start-time">Nastavit</button>
                </div>
                <div class="inline-row" style="margin-top:8px">
                    <button class="btn big" id="btn-level-back" style="flex:1">&#9664; Level zpět</button>
                    <button class="btn big" id="btn-level-fwd" style="flex:1">Level vpřed &#9654;</button>
                </div>
            </div>
            </div>
        </div>

        <!-- Blind structure preview -->
        <div class="section" id="section-blinds">
            <h2><button type="button" class="guard-toggle" data-target="section-blinds">&#x1F512;</button> Struktura blindů</h2>
            <div class="section-body">
            <table class="structure-table">
                <thead>
                    <tr><th>#</th><th>Čas</th><th>SB</th><th>BB</th><th id="th-ante" style="display:none">Ante</th></tr>
                </thead>
                <tbody id="structure-body"></tbody>
            </table>
            </div>
        </div>

        <!-- Config -->
        <div class="section" id="section-config">
            <h2><button type="button" class="guard-toggle" data-target="section-config">&#x1F512;</button> Nastavení turnaje</h2>
            <div class="section-body">
                <div class="config-grid">
                    <div class="config-sub">Struktura</div>
                    <div class="config-field">
                        <label for="cfg-level-dur">Délka levelu (min)</label>
                        <input type="number" id="cfg-level-dur" value="20" inputmode="numeric">
                    </div>
                    <div class="config-field">
                        <label for="cfg-max-levels">Max levelů</label>
                        <input type="number" id="cfg-max-levels" value="12" min="2" inputmode="numeric">
                    </div>
                    <div class="config-field">
                        <label for="cfg-smallest">Min SB</label>
                        <input type="number" id="cfg-smallest" value="25" inputmode="numeric">
                    </div>
                    <div class="config-field">
                        <label for="cfg-max-bb">Max BB</label>
                        <input type="number" id="cfg-max-bb" value="10000" min="100" inputmode="numeric">
                    </div>
                    <div class="config-field">
                        <label for="cfg-ante-mult">Ante (× BB)</label>
                        <input type="number" id="cfg-ante-mult" value="0" min="0" max="10" step="0.5" inputmode="decimal">
                    </div>
                    <div class="config-field">
                        <label for="cfg-start-time-est">Orientační začátek</label>
                        <input type="time" id="cfg-start-time-est" value="19:00" step="60">
                    </div>
                    <div class="config-field full-row">
                        <label>Křivka blindů: <strong id="blind-curve-val">1.0</strong></label>
                        <input type="range" id="cfg-blind-curve" min="0.5" max="2.0" step="0.1" value="1.0">
                        <small class="hint">0.7 = rychlý start &nbsp;|&nbsp; 1.0 = rovnoměrný &nbsp;|&nbsp; 1.3 = rychlý konec</small>
                    </div>

                    <div class="config-sub">Přestávka</div>
                    <div class="config-field">
                        <label for="cfg-break-dur">Délka přestávky (min)</label>
                        <input type="number" id="cfg-break-dur" value="30" min="1" inputmode="numeric">
                    </div>
                    <div class="config-field">
                        <label for="cfg-levels-per-break">Přestávka každých N levelů</label>
                        <input type="number" id="cfg-levels-per-break" value="0" min="0" inputmode="numeric">
                    </div>

                    <div class="config-sub">Žetony</div>
                    <div class="config-field">
                        <label for="cfg-buyin-amount">Buy-in (Kč)</label>
                        <input type="number" id="cfg-buyin-amount" value="400" inputmode="numeric">
                    </div>
                    <div class="config-field">
                        <label for="cfg-stack">Počáteční žetony</label>
                        <input type="number" id="cfg-stack" value="5000" inputmode="numeric">
                    </div>
                    <div class="config-field">
                        <label for="cfg-bonus">Bonus žetony</label>
                        <input type="number" id="cfg-bonus" value="5000" inputmode="numeric">
                    </div>

                    <div class="config-sub">Add-on</div>
                    <div class="config-field">
                        <label for="cfg-addon-amount">Add-on cena (Kč)</label>
                        <input type="number" id="cfg-addon-amount" value="0" min="0" inputmode="numeric">
                    </div>
                    <div class="config-field">
                        <label for="cfg-addon-chips">Add-on žetony</label>
                        <input type="number" id="cfg-addon-chips" value="0" min="0" inputmode="numeric">
                    </div>
                </div>
                <div class="save-status" id="config-save-status"></div>
            </div>
        </div>

        <!-- Players -->
        <div class="section" id="section-players">
            <h2><button type="button" class="guard-toggle" data-target="section-players">&#x1F512;</button> Hráči <span class="badge" id="player-count">0</span></h2>
            <div class="section-body">
            <div class="inline-row">
                <input type="text" id="new-player-name" placeholder="Jméno hráče..." enterkeyhint="done">
                <button class="btn accent" id="btn-add-player">+ Hráč</button>
            </div>
            <div id="players-list"></div>
            <div class="player-summary" id="player-summary"></div>
            <div class="btn-row" style="margin-top:12px">
                <button class="btn" id="btn-add-test-players">+ Test (8)</button>
                <button class="btn danger" id="btn-remove-all-players">Smazat vše</button>
            </div>
            </div>
        </div>

        <!-- Seating -->
        <div class="section" id="section-seating">
            <h2><button type="button" class="guard-toggle" data-target="section-seating">&#x1F512;</button> Zasedací pořádek</h2>
            <div class="section-body">
                <div id="table-locks-ui"></div>
                <div class="btn-row" style="margin-top:12px">
                    <button class="btn big" id="btn-reshuffle-seats">Přepočítat místa</button>
                </div>
            </div>
        </div>

        <!-- Payouts -->
        <div class="section" id="section-payout">
            <h2><button type="button" class="guard-toggle" data-target="section-payout">&#x1F512;</button> Výplaty</h2>
            <div class="section-body">
                <div class="pool-display" id="pool-display"></div>
                <div id="payout-config-rows"></div>
                <div class="btn-row" style="margin-top:8px">
                    <button class="btn" id="btn-payout-add">+ Místo</button>
                    <button class="btn" id="btn-payout-remove">− Místo</button>
                    <button class="btn" id="btn-payout-auto">Auto</button>
                </div>
                <div class="payout-config-total" id="payout-config-total"></div>
            </div>
        </div>

        <!-- Winners -->
        <div class="section" id="section-winners">
            <h2><button type="button" class="guard-toggle" data-target="section-winners">&#x1F512;</button> Výsledky</h2>
            <div class="section-body">
                <div id="winners-fields"></div>
                <div class="btn-row" style="margin-top:8px">
                    <button class="btn accent big" id="btn-save-winners">Ukončit turnaj</button>
                </div>
            </div>
        </div>

        <!-- Notes -->
        <div class="section" id="section-notes">
            <h2><button type="button" class="guard-toggle" data-target="section-notes">&#x1F512;</button> Poznámky (ticker)</h2>
            <div class="section-body">
                <div id="notes-list"></div>
                <div class="btn-row" style="margin-top:8px">
                    <button class="btn" id="btn-add-note">+ Poznámka</button>
                    <span class="save-status" id="notes-save-status"></span>
                </div>
                <div class="config-field" style="margin-top:16px;border-top:1px solid rgba(255,255,255,0.08);padding-top:16px">
                    <label>Text při přestávce</label>
                    <textarea id="cfg-break-message" rows="4" placeholder="Např. Občerstvení v kuchyni..."></textarea>
                    <span class="save-status" id="break-save-status"></span>
                </div>
            </div>
        </div>

    </div><!-- .admin-wrap -->

    <script src="app.js"></script>
</body>
</html>
